import{a as i,s as C,u as y,e as r,f as B,j as s,b as g,B as p,g as F,d as b,h as z,i as E,k as $,H as A,P as R}from"./index-DEBviD5U.js";const j=["4.5","5","5.5"],q=t=>e=>e.cart.data.find(a=>a.id===t),L=t=>e=>e.favorites.data.find(a=>a.id===t),D=({productId:t})=>{var u,h;const e=i(C(t)),a=y(),[l,n]=r.useState(0),[d,v]=r.useState(0),m=((u=i(q(+t)))==null?void 0:u.quantity)||0,x=i(L(+t));if(r.useEffect(()=>{e||a(B(t))},[a,t,e]),r.useEffect(()=>{n(0)},[e]),!e)return;const N=e.category.name.toLowerCase()==="shoes",S=e.category.name.toLowerCase()==="clothes",I=c=>{n(c)},w=c=>{v(c)},k=()=>{a(x?b(e.id):z(e))},P=()=>{a(F({...e,size:parseFloat(j[d]),quantity:1}))};return s.jsxs("div",{className:"p-5 xl:flex",children:[s.jsxs("div",{className:"max-xl:flex max-md:flex-col max-md:gap-2 xl:contents",children:[s.jsx("img",{src:e.images[l].includes("[")?(h=g([e.images[l]]))==null?void 0:h[0]:e.images[l],className:"h-[380px] w-[380px] shrink-0 rounded-lg max-md:w-[100%] max-sm:h-auto max-sm:w-[100%]",width:380,height:380,alt:""}),s.jsx("ul",{className:"flex gap-y-1 max-md:gap-x-2.5 md:flex-col",children:e.images.map((c,o)=>{var f;return s.jsx("li",{className:"transition-all hover:scale-[1.025]",children:s.jsx("img",{src:c.includes("[")?(f=g([c]))==null?void 0:f[0]:c,className:`min-h-[91px] min-w-[91px] flex-wrap rounded-lg max-md:min-w-[80px] md:ml-4.5 ${o===l?"cursor-not-allowed":"cursor-pointer"}`,onClick:()=>I(o),width:91,height:91,alt:""})},o)})})]}),s.jsxs("div",{className:"flex flex-col max-xl:mt-5 xl:ml-8",children:[s.jsx("h3",{className:"text-lg",children:e.title}),s.jsxs("span",{className:"mt-2.5 text-xl font-bold",children:["$",(e.price*.8).toFixed(0)]}),(N||S)&&s.jsxs("div",{className:"mt-5 flex items-center gap-x-4 text-sm text-(--color-gray-1)",children:[s.jsx("span",{children:"Sizes:"}),s.jsx("ul",{className:"flex items-center gap-x-1.5 text-(--color-light)",children:j.map((c,o)=>s.jsx("li",{onClick:()=>w(o),className:`cursor-pointer rounded-lg px-2 py-1 ${o===d?"bg-(--color-accent-dark)":"bg-(--bg-color)"}`,children:c},o))})]}),s.jsx("div",{className:"mt-5 text-sm font-normal text-(--color-gray-3)",children:e.description}),s.jsxs("div",{className:"mt-5 flex gap-2.5 max-md:flex-col",children:[s.jsxs(p,{onClick:P,className:"max-md:w-full",children:["Add to cart ",m>0?`(${m})`:""]}),s.jsx(p,{variant:"gray",onClick:k,className:"max-md:w-full",children:x?"★ Remove from favorites":"☆ Add to favorites"})]})]})]})},T=()=>{const{id:t}=E(),e=i(C(t||"")),a=i(n=>n.products.data),l=y();return r.useEffect(()=>{e&&l($(e.category.id.toString()))},[l]),s.jsxs(s.Fragment,{children:[s.jsx(A,{children:s.jsx(D,{productId:t??"0"})}),s.jsx(R,{products:a,title:"Related products"})]})};export{T as default};
